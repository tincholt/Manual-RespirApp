<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Manual De Usuario – RespirApp</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5, user-scalable=yes">
<link rel="icon" type="image/x-icon" href="assets/logo_login.ico">
<style>
    :root {
        --primary: #003F8A;
        --primary-dark: #002D5F;
        --bg: #f4f6f8;
        --card-bg: #ffffff;
        --border: #dde3ea;
    }

    * {
        box-sizing: border-box;
    }

    html {
        scroll-behavior: smooth;
    }

    body {
        margin: 0;
        font-family: "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
        background: var(--bg);
        color: #333;
        line-height: 1.7;
    }

    /* Layout */
    #sidebar {
        width: 280px;
        background: #ffffff;
        height: 100vh;
        position: fixed;
        left: 0;
        top: 0;
        border-right: 1px solid var(--border);
        padding: 20px;
        overflow-y: auto;
        transition: transform 0.3s ease, left 0.3s ease;
        z-index: 1000;
    }
    
    #sidebar.closed {
        transform: translateX(-100%);
    }
    
    #sidebar-toggle-btn {
        position: fixed;
        left: 20px;
        top: 20px;
        z-index: 1001;
        background: var(--primary);
        color: #fff;
        border: none;
        padding: 10px 14px;
        border-radius: 6px;
        font-size: 18px;
        cursor: pointer;
        box-shadow: 0 2px 8px rgba(0,0,0,0.15);
        transition: left 0.3s ease, opacity 0.3s ease;
        display: none;
    }
    
    #sidebar-toggle-btn:hover {
        background: var(--primary-dark);
    }
    
    #sidebar.closed ~ #sidebar-toggle-btn {
        left: 20px;
    }
    
    #sidebar:not(.closed) ~ #sidebar-toggle-btn {
        left: 300px;
    }
    
    @media (min-width: 901px) {
        #sidebar-toggle-btn {
            display: block;
        }
    }
    
    #sidebar-close-btn {
        position: absolute;
        top: 15px;
        right: 15px;
        background: transparent;
        border: none;
        font-size: 24px;
        color: var(--primary);
        cursor: pointer;
        width: 30px;
        height: 30px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 4px;
        transition: background 0.2s ease;
    }
    
    #sidebar-close-btn:hover {
        background: #f0f0f0;
    }

    #sidebar h2 {
        font-size: 18px;
        margin: 10px 0 20px 0;
        color: var(--primary);
        text-align: center;
    }

    #sidebar a {
        display: block;
        padding: 6px 0;
        text-decoration: none;
        color: var(--primary-dark);
        font-weight: 600;
        font-size: 14px;
    }

    #sidebar a:hover {
        color: var(--primary);
        text-decoration: underline;
    }

    .sidebar-section-title {
        margin-top: 15px;
        font-size: 13px;
        text-transform: uppercase;
        letter-spacing: 0.05em;
        color: #888;
        font-weight: 700;
    }

    #content {
        margin-left: 280px;
        padding: 32px 40px;
        max-width: 980px;
        transition: margin-left 0.3s ease;
    }
    
    #sidebar.closed ~ #content {
        margin-left: 0;
        max-width: 100%;
        padding-left: 60px;
    }

    /* Header / logo */
    .logo {
        text-align: center;
        margin-bottom: 10px;
    }

    .logo img {
        max-width: 180px;
        max-height: 120px;
        width: auto;
        height: auto;
        object-fit: contain;
    }

    #menuToggle {
        display: none;
        position: fixed;
        left: 12px;
        top: 12px;
        z-index: 1100;
    }
    
    /* Ocultar botón toggle en desktop cuando sidebar está visible */
    @media (min-width: 901px) {
        #menuToggle {
            display: none !important;
        }
    }

    #menuToggle button {
        background: var(--primary);
        color: #fff;
        border: none;
        padding: 8px 12px;
        border-radius: 4px;
        font-size: 16px;
        cursor: pointer;
        box-shadow: 0 2px 6px rgba(0,0,0,0.15);
    }

    #menuToggle button:focus {
        outline: 2px solid #fff;
        outline-offset: 2px;
    }

    h1 {
        font-size: 32px;
        color: var(--primary);
        margin-bottom: 4px;
    }

    h2 {
        color: var(--primary);
        font-size: 26px;
        margin-top: 40px;
        border-bottom: 2px solid #B3D4F0;
        padding-bottom: 6px;
    }

    h3 {
        color: var(--primary-dark);
        font-size: 20px;
        margin-top: 32px;
        margin-bottom: 12px;
    }

    h4 {
        color: #002D5F;
        font-size: 17px;
        margin-top: 24px;
        margin-bottom: 10px;
    }

    p {
        margin: 12px 0;
        text-align: justify;
    }

    ul {
        margin-top: 8px;
        margin-bottom: 16px;
        text-align: justify;
        padding-left: 24px;
    }

    li {
        text-align: justify;
        margin-bottom: 8px;
        line-height: 1.6;
    }

    hr {
        border: none;
        border-top: 1px solid var(--border);
        margin: 32px 0;
    }

    .video-box {
        background: #e8f4f9;
        padding: 12px 16px;
        border-left: 5px solid var(--primary);
        margin: 16px 0;
        border-radius: 4px;
    }

    .video-box a {
        text-decoration: none;
        color: var(--primary-dark);
        font-weight: bold;
    }

    .video-box a:hover {
        color: var(--primary);
    }

    .small-note {
        color: #666;
        font-size: 13px;
    }

    /* Images */
    .image-row {
        display: flex;
        gap: 16px;
        flex-wrap: wrap;
        margin: 10px 0 4px 0;
    }

    .image-row img {
        flex: 1 1 160px;
        max-width: 200px;
        border: none;
        background: transparent;
        padding: 0;
        object-fit: contain;
    }

    .image-single {
        margin: 8px 0;
    }

    .image-single img {
        max-width: 220px;
        width: 100%;
        border: none;
        background: transparent;
        padding: 0;
        object-fit: contain;
    }

    .req-layout {
        display: flex;
        gap: 16px;
        align-items: flex-start;
        flex-wrap: wrap;
    }

    .req-layout .text {
        flex: 1 1 220px;
        text-align: justify;
    }

    .req-layout .image-single {
        flex: 0 0 180px;
    }

    /* Clase para forzar vista de escritorio */
    body.desktop-view #sidebar {
        transform: translateX(0) !important;
        width: 280px !important;
    }
    
    body.desktop-view #sidebar.closed {
        transform: translateX(-100%) !important;
    }
    
    body.desktop-view #content {
        margin-left: 280px !important;
        padding: 32px 40px !important;
        max-width: 980px !important;
        transition: margin-left 0.3s ease !important;
    }
    
    body.desktop-view #sidebar.closed ~ #content {
        margin-left: 0 !important;
        max-width: 100% !important;
        padding-left: 60px !important;
    }
    
    body.desktop-view #menuToggle {
        display: none !important;
    }
    
    body.desktop-view #sidebar-toggle-btn {
        display: block !important;
    }
    
    body.desktop-view h1 {
        font-size: 32px !important;
    }
    
    body.desktop-view h2 {
        font-size: 26px !important;
    }
    
    body.desktop-view h3 {
        font-size: 20px !important;
    }
    
    body.desktop-view h4 {
        font-size: 17px !important;
    }
    
    body.desktop-view p {
        font-size: inherit !important;
    }
    
    body.desktop-view .image-row img {
        max-width: 200px !important;
        flex: 1 1 160px !important;
    }
    
    /* Solo aplicar 500px a figuras grandes (6-11) que tienen max-width:500px inline */
    body.desktop-view .image-single img[style*="max-width:500px"] {
        max-width: 500px !important;
    }
    
    body.desktop-view .req-layout {
        flex-direction: row !important;
    }

    /* Responsive */
    @media (max-width: 900px) {
        #sidebar {
            transform: translateX(-100%);
            width: 260px;
        }
        #sidebar.open {
            transform: translateX(0);
        }
        #content {
            margin-left: 0;
            padding: 80px 18px 24px 18px;
        }
        #menuToggle {
            display: block;
        }
        
        h1 {
            font-size: 26px;
        }
        
        h2 {
            font-size: 22px;
            margin-top: 32px;
        }
        
        h3 {
            font-size: 18px;
            margin-top: 24px;
        }
        
        h4 {
            font-size: 16px;
            margin-top: 20px;
        }
        
        p {
            font-size: 15px;
        }
        
        .image-row img {
            max-width: 100%;
            flex: 1 1 100%;
        }
        
        .image-single img {
            max-width: 100%;
        }
        
        .req-layout {
            flex-direction: column;
        }
        
        .req-layout .image-single {
            flex: 1 1 100%;
            text-align: center;
        }
    }
    
    /* Mobile específico (teléfonos) */
    @media (max-width: 480px) {
        #content {
            padding: 70px 12px 20px 12px;
        }
        
        h1 {
            font-size: 22px;
        }
        
        h2 {
            font-size: 20px;
            margin-top: 28px;
        }
        
        h3 {
            font-size: 17px;
            margin-top: 20px;
        }
        
        h4 {
            font-size: 15px;
        }
        
        p {
            font-size: 14px;
            margin: 10px 0;
        }
        
        ul {
            padding-left: 20px;
        }
        
        li {
            font-size: 14px;
            margin-bottom: 6px;
        }
        
        .video-box {
            padding: 10px 12px;
            font-size: 14px;
        }
        
        .small-note {
            font-size: 12px;
        }
        
        .logo img {
            max-width: 140px;
            max-height: 100px;
        }
    }
    
    /* Botón Ir Arriba */
    #scrollToTop {
        position: fixed;
        bottom: 30px;
        right: 30px;
        background: var(--primary);
        color: #fff;
        border: none;
        padding: 12px 20px;
        border-radius: 8px;
        font-size: 14px;
        font-weight: 600;
        cursor: pointer;
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        z-index: 999;
        transition: all 0.3s ease;
        font-family: "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    }
    
    #scrollToTop:hover {
        background: var(--primary-dark);
        transform: translateY(-2px);
        box-shadow: 0 6px 16px rgba(0,0,0,0.2);
    }
    
    #scrollToTop:active {
        transform: translateY(0);
    }
    
    @media (max-width: 900px) {
        #scrollToTop {
            bottom: 20px;
            right: 20px;
            padding: 10px 16px;
            font-size: 13px;
        }
    }
</style>
</head>

<body>

<!-- Botón menú móvil -->
<div id="menuToggle">
    <button id="menuToggleBtn">☰</button>
</div>

<!-- Botón toggle sidebar (desktop) -->
<button id="sidebar-toggle-btn" style="display: none;">☰</button>

<!-- Sidebar -->
<div id="sidebar">
    <button id="sidebar-close-btn" title="Cerrar menú">×</button>
    <div class="logo">
        <img src="assets/logo.png" alt="Logo RespirApp">
    </div>

    <h2>Manual RespirApp</h2>

    <div class="sidebar-section-title">General</div>
    <a href="#intro">Introducción</a>
    <a href="#general">1. Consideraciones generales</a>

    <div class="sidebar-section-title">Usuarios</div>
    <a href="#usuarios">2. Gestión de usuarios</a>

    <div class="sidebar-section-title">Rutinas</div>
    <a href="#rutinas">3. Rutinas y ejercicios</a>

    <div class="sidebar-section-title">Juegos</div>
    <a href="#juegos">4. Juegos</a>

    <div class="sidebar-section-title">Hardware</div>
    <a href="#sensor">5. Configuración del sensor</a>

    <div class="sidebar-section-title">Soporte</div>
    <a href="#problemas">6. Resolución de problemas</a>
    <a href="#contacto">7. Contacto y soporte</a>
</div>

<!-- Contenido -->
<div id="content">

<h1 id="intro">Manual de Usuario – RespirApp</h1>
<p class="small-note">© 2025 RespirApp. Todos los derechos reservados.</p>

<h2 id="general">1. Consideraciones Generales</h2>

<p>
RespirApp es una plataforma gamificada diseñada para el entrenamiento respiratorio en población pediátrica mediante el uso del sensor de flujo de MBMED® y su dispositivo FluxMed GrH.
GrH. El software integra módulos de adquisición de señal, juegos terapéuticos, gestión de usuarios
y generación de reportes clínicos. Este manual describe las funciones principales para administradores, profesionales y pacientes, y provee enlaces a tutoriales de video que muestran el uso de cada
componente.
</p>

<h3>1.1. Requisitos del Sistema</h3>

<div class="req-layout">
    <div class="text">
        <ul>
        <li>Sistema operativo: Windows 10 o superior.</li>
        <li>Python 3.8+ instalado.</li>
        <li>Sensor de flujo MBMED® junto al FluxMed GrH.</li>
        <li>Accesorios Recomendados: boquilla espirométrica, filtro HME, clip nasal y obligatoriamente el adaptador 3D para Soplo Antillamas.</li>
        <li>Conexión USB disponible para establecer comunicación serie.</li>
        </ul>
    </div>
    <div class="image-single" style="text-align:center;">
        <img src="assets/fluxmedGRH.png" alt="Dispositivo FluxMed GrH" style="max-width:220px;">
        <p class="small-note"><i>Figura 1: Equipo FluxMed GRH.</i></p>
    </div>
</div>

<h3>1.2. Uso de Boquillas, Filtros y Adaptadores</h3>
<p>
Para garantizar mediciones respiratorias precisas, seguras y reproducibles, se recomienda utilizar los accesorios complementarios del sensor de flujo. A continuación se detallan los
elementos útiles según el diseño técnico de RespirApp.
</p>

<h4>1.2.1. Boquillas</h4>
<p>
El sensor puede utilizarse con una boquilla espirométrica para asegurar un sellado adecuado y
evitar fugas durante la inspiración y espiración. Existen dos tipos compatibles:
</p>
<ul>
<li>Boquillas espirométricas rígidas: permiten un flujo constante y son ideales para mediciones más precisas, como PEF o flujo laminar, además de ser antibacteriales y mantener la bioseguridad necesaria.</li>
<li>Boquillas descartables: recomendadas para uso clínico con múltiples pacientes, garantizan higiene y reducen el riesgo de contaminación cruzada.</li>
</ul>

<div class="image-row">
    <img src="assets/boquilla_espirometria.png" alt="Boquilla espirométrica rígida" style="max-width:200px; display:block; margin:20px auto;">
    <img src="assets/boquillas.png" alt="Boquillas descartables" style="max-width:200px; display:block; margin:20px auto;">
</div>
<p class="small-note" style="text-align:center;"><i>Figura 2: Boquillas de espirometría.</i></p>

<h4>1.2.2. Filtro HME</h4>
<p>
El filtro HME debe colocarse entre el sensor y la boquilla. Su función es:
</p>
<ul>
<li>proteger el sensor del contacto directo con humedad, vapor o secreciones,</li>
<li>disminuir el riesgo de contaminación,</li>
<li>mantener la resistencia aerodinámica estable durante la medición.</li>
</ul>
<p>
El uso del filtro preserva la integridad del equipo y asegura la consistencia de los datos.
</p>

<div class="image-single">
    <img src="assets/FiltroHME.png" alt="Filtro HME" style="max-width:200px; display:block; margin:20px auto;">
</div>
<p class="small-note" style="text-align:center;"><i>Figura 3: Filtro HME.</i></p>

<h4>1.2.3. Clip Nasal</h4>
<p>
Para obtener mediciones correctas en apneas, el paciente puede utilizar un clip nasal. Este evita fugas de aire por la nariz y asegura que todo el flujo sea dirigido
hacia el sensor, aumentando la validez de los parámetros obtenidos.
</p>

<div class="image-single">
    <img src="assets/clipnasal.png" alt="Clip nasal" style="max-width:150px; display:block; margin:20px auto;">
</div>
<p class="small-note" style="text-align:center;"><i>Figura 4: Clip nasal para espirometrías.</i></p>

<h4>1.2.4. Adaptadores 3D</h4>
<p>
Los adaptadores 3D fueron diseñados para:
</p>
<ul>
<li>ampliar el rango de aplicación del sensor (esencial para Soplo Antillamas),</li>
<li>mejorar el acople entre boquillas de distintos tamaños y el orificio fijo del dispositivo,</li>
<li>permitir un uso seguro en pacientes con diferentes capacidades bucales.</li>
</ul>
<p>


<div class="image-single">
    <img src="assets/adaptadores.png" alt="Adaptadores 3D" style="max-width:300px; display:block; margin:20px auto;">
</div>
<p class="small-note" style="text-align:center;"><i>Figura 5: Adaptadores impresos en 3D.</i></p>
<hr>

<h2 id="usuarios">2. Gestión de Usuarios</h2>

<h3>2.1. Perfiles De Usuario</h3>
<p>
RespirApp cuenta con tres tipos de usuarios, cada uno con permisos específicos:
</p>
<ul>
<li><strong>Administrador:</strong> gestiona profesionales, pacientes, permisos y configuraciones globales.</li>
<li><strong>Profesional:</strong> asigna rutinas, crea ejercicios, visualiza resultados y genera reportes.</li>
<li><strong>Paciente:</strong> ejecuta rutinas asignadas.</li>
</ul>

<h3>2.2. Inicio De Sesión</h3>
<p>
Al iniciar la aplicación, aparecerá la pantalla principal donde podrá ingresar con usuario y contraseña. Si es la primera vez, la primera cuenta será asignada como administrador.
</p>

<h3>2.3. Editar Perfil</h3>
<p>Permite modificar datos personales, nombre, email o credenciales del usuario.</p>
<div class="video-box">
    <a href="https://youtu.be/czrdR7so91I" target="_blank">Tutorial: Editar Perfil</a>
</div>

<h3>2.4. Cambiar Contraseña</h3>
<p>
Funcionalidad disponible para todos los usuarios desde el menú de configuración. Incluye validación segura y hashing.
</p>
<div class="video-box">
    <a href="https://youtu.be/fv-ywY6wCU0" target="_blank">Tutorial: Cambiar Contraseña</a>
</div>

<h3>2.5. Configuración De Volumen</h3>
<p>
La aplicación permite ajustar el volumen del sistema desde el menú de configuración. El control de volumen está disponible para todos los usuarios y permite regular el nivel de audio de los juegos y notificaciones del sistema. El ajuste se realiza mediante un deslizador que permite un control preciso del volumen, desde silencio (0%) hasta volumen máximo (100%).
</p>
<p>
Para ajustar el volumen, acceda al menú de configuración y utilice el control deslizador ubicado en la sección de volumen. Los cambios se aplican inmediatamente y se mantienen durante toda la sesión.
</p>

<h3>2.6. Agregar Profesional</h3>
<p>
Opción disponible sólo para el administrador. Permite cargar un nuevo profesional al sistema desde la pantalla de inicio.
</p>
<div class="video-box">
    <a href="https://youtu.be/THCATtkuzOM" target="_blank">Tutorial: Agregar Profesional</a>
</div>

<h3>2.7. Buscar / Editar Profesional</h3>
<p>
El administrador puede visualizar, filtrar y editar la información de profesionales existentes.
</p>
<div class="video-box">
    <a href="https://youtu.be/KdglBXG8_HM" target="_blank">Tutorial: Buscar / Editar Profesional</a>
</div>

<h3>2.8. Agregar Paciente</h3>
<p>
Disponible para administrador y profesional. Permite registrar nuevos pacientes (ya que el administrador puede tener función de profesional de la salud).
</p>
<div class="video-box">
    <a href="https://youtu.be/kEzBD_hxnsQ" target="_blank">Tutorial: Agregar Paciente</a>
</div>

<h3>2.9. Reasignar Pacientes a Otros Profesionales</h3>
<p>
El administrador con permisos ampliados puede reasignar un paciente a otro profesional en
caso de cambios en la estructura del equipo, rotación médica o necesidad de derivación. Esta función
garantiza la continuidad del tratamiento y permite que el nuevo profesional acceda inmediatamente
al historial, rutinas, informes y observaciones del paciente. A su vez se pueden reasignar profesionales a pacientes.
</p>
<p>
Para reasignar un paciente, se debe acceder a la sección “Ver Paciente”, seleccionar “Editar
Profesional Asignado” y elegir el nuevo profesional de la lista disponible. Una vez confirmada la
reasignación, el sistema actualiza automáticamente la relación profesional–paciente. Todo esto con el rol de administrador.
</p>
<div class="video-box">
    <a href="https://youtu.be/nbhdOJwHDiY" target="_blank">Tutorial: Reasignar Pacientes</a>
</div>

<hr>

<h2 id="rutinas">3. Rutinas y Ejercicios</h2>

<h3>3.1. Crear Rutina</h3>
<p>
El profesional puede generar una rutina combinando ejercicios basados en los juegos terapéuticos. Cada ejercicio incluye parámetros como duración y cantidad de repeticiones.
</p>
<div class="video-box">
    <a href="https://youtu.be/K8mLeYi7fho" target="_blank">Tutorial: Crear Rutina</a>
</div>

<h3>3.2. Ejecutar Rutina</h3>
<p>
El paciente accede a la sección “Iniciar Rutina”, donde se presentan los juegos en el orden
definido por su profesional, si es que se tienen rutinas programadas para el día; en caso contrario aparece un mensaje informativo indicando que no hay rutinas disponibles. Los resultados se guardan automáticamente y son accesibles para el
profesional.
</p>

<div class="image-single">
    <img src="assets/main_pat.png" alt="Ejecutar rutina" style="max-width:500px; display:block; margin:20px auto;">
</div>
<p class="small-note" style="text-align:center;"><i>Figura 6: Pantalla de ejecutar rutina.</i></p>

<h3>3.3. Resultados y Reportes</h3>
<p>
Los resultados de cada juego (curvas de flujo, métricas respiratorias, tiempo de apnea, PEF,
etc.) se almacenan en formato .jsonb en la base de datos y pueden exportarse a PDF. El profesional puede visualizar
el progreso del paciente a través de gráficas y reportes clínicos.
</p>

<h3>3.4. Ver / Guardar Informes</h3>
<p>
La plataforma permite que el profesional visualice informes generados tras cada rutina o sesión.
En estos informes se incluyen datos y resultados clave de los juegos. Además, existe la opción de exportar y guardar los informes en formato
PDF para facilitar su impresión, archivado o envío a terceros.
</p>
<div class="video-box">
    <a href="https://youtu.be/oCqQ8bjiNnk" target="_blank">Tutorial: Ver / Guardar Informes</a>
</div>

<h3>3.5. Papelera de Rutinas</h3>
<p>
Cuando se elimina una rutina, esta no se borra permanentemente de inmediato, sino que se mueve a la papelera (donde permanece 30 días hasta su borrado automático). Esta funcionalidad permite recuperar rutinas eliminadas por error y gestionar mejor el espacio de almacenamiento.
</p>
<p>
Para acceder a la papelera, el profesional debe hacer clic en el botón de papelera ubicado en la pantalla principal. Se abrirá un panel lateral que muestra todas las rutinas eliminadas, organizadas por fecha de eliminación.
</p>
<p>
Desde la papelera, el profesional puede realizar las siguientes acciones:
</p>
<ul>
<li><strong>Recuperar rutina:</strong> permite restaurar una rutina eliminada a su estado original, haciéndola nuevamente disponible para asignación y ejecución.</li>
<li><strong>Eliminar permanentemente:</strong> elimina de forma definitiva una rutina específica de la papelera. Esta acción no se puede deshacer.</li>
<li><strong>Recuperar todas:</strong> restaura todas las rutinas de la papelera del profesional en una sola acción.</li>
<li><strong>Vaciar papelera:</strong> elimina permanentemente todas las rutinas que se encuentran en la papelera. Esta acción requiere confirmación y no se puede deshacer.</li>
</ul>
<p>
Es importante tener en cuenta que las rutinas eliminadas permanentemente no pueden ser recuperadas, por lo que se recomienda revisar cuidadosamente el contenido de la papelera antes de vaciarla.
</p>

<hr>

<h2 id="juegos">4. Juegos</h2>
<p>
RespirApp incluye cuatro juegos diseñados sobre parámetros respiratorios validados.
</p>

<h3>4.1. Barco al Viento</h3>
<p>
Entrena flujo inspiratorio laminar. El paciente debe inhalar de manera lenta y constante para
avanzar el barco. La inhalación debe mantenerse entre 20 y 40 L/min para que el barco avance correctamente.
</p>
<div class="video-box">
    <a href="https://youtu.be/Y2W6eSnWEzk" target="_blank">Demo: Barco al Viento</a>
</div>

<div class="image-single">
    <img src="assets/barcoviento.png" alt="Barco al Viento" style="max-width:500px; display:block; margin:20px auto;">
</div>
<p class="small-note" style="text-align:center;"><i>Figura 7: Pantalla de inicio – Barco al Viento.</i></p>


<h3>4.2. Soplo Antillamas</h3>
<p>
Evaluación pico de flujo espiratorio (PEF) y espiración rápida. El objetivo es apagar llamas generadas de manera aleatoria en tres niveles diferentes. La manguera se mueve utilizando las flechas del teclado, y el PEF (pico de flujo espiratorio) activa el agua para apagar los incendios por etapas.
</p>
<div class="video-box">
    <a href="https://youtu.be/p3dBl_ff8Dc" target="_blank">Demo: Soplo Antillamas</a>
</div>

<div class="image-single">
    <img src="assets/soploantillamas.png" alt="Soplo Antillamas" style="max-width:500px; display:block; margin:20px auto;">
</div>
<p class="small-note" style="text-align:center;"><i>Figura 8: Pantalla de inicio – Soplo Antillamas.</i></p>

<h3>4.3. PulmoRiders</h3>
<p>
Entrena tiempo de apnea controlada. El jugador mantiene un período de apnea para avanzar
en una carrera animada. Mientras se mantenga la apnea, el caballo avanzará continuamente. De modo contrario, si se detecta flujo respiratorio, el caballo se detendrá automáticamente.
</p>
<div class="video-box">
    <a href="https://youtu.be/qG1wbnBoZr8" target="_blank">Demo: PulmoRiders</a>
</div>

<div class="image-single">
    <img src="assets/pulmoriders.png" alt="PulmoRiders" style="max-width:500px; display:block; margin:20px auto;">
</div>
<p class="small-note" style="text-align:center;"><i>Figura 9: Pantalla de inicio – PulmoRiders.</i></p>

<h3>4.4. Gira Gira</h3>
<p>
Entrena flujo espiratorio sostenido. El paciente debe mantener un soplo continuo para girar el molino.
</p>
<div class="video-box">
    <a href="https://youtu.be/MsmAb9FBB2w" target="_blank">Demo: Gira Gira</a>
</div>

<div class="image-single">
    <img src="assets/giragira.png" alt="Gira Gira" style="max-width:500px; display:block; margin:20px auto;">
</div>
<p class="small-note" style="text-align:center;"><i>Figura 10: Pantalla de inicio – Gira Gira.</i></p>

<hr>

<h2 id="sensor">5. Configuración del Sensor</h2>
<p>
El sensor debe conectarse vía USB antes de iniciar una rutina. El sistema detectará automáticamente el puerto y comenzará a recibir datos de flujo. Es necesario la calibración del sensor previo al comienzo de la rutina para que los datos obtenidos sean correctos.
</p>

<div class="image-single">
    <img src="assets/calibracion.png" alt="Calibración del sensor" style="max-width:500px; display:block; margin:20px auto;">
</div>
<p class="small-note" style="text-align:center;"><i>Figura 11: Calibración del sensor.</i></p>

<hr>

<h2 id="problemas">6. Resolución de Problemas</h2>

<p>A continuación se presentan las incidencias más comunes y sus posibles soluciones:</p>

<ul>
    <li><strong>No se detecta el sensor:</strong> verificar la conexión USB y cerrar otras aplicaciones que puedan estar usando el puerto serie.</li>
    <li><strong>El juego no responde al soplo:</strong> revisar que la boquilla esté bien colocada, que el filtro no esté obstruido y que no haya fugas de aire. Asegurarse de utilizar el clip nasal.</li>
    <li><strong>La rutina no inicia:</strong> confirmar que el paciente tenga una rutina asignada por el profesional.</li>
</ul>

<hr>

<h2 id="contacto">7. Contacto y Soporte</h2>

<p>
Para soporte técnico, reportes de error o consultas relacionadas con el uso del sistema,
puede comunicarse con el equipo desarrollador o con el profesional responsable del dispositivo.
</p>
<p>
<strong>Email soporte:</strong> soporte@respirapp.com<br>
<strong>Desarrollador:</strong> Equipo RespirApp – 2025
</p>



</div> <!-- cierre de #content -->

<!-- Botón Ir Arriba -->
<button id="scrollToTop" style="display: none;">Ir Arriba</button>

<script>
// Detectar y aplicar vista de escritorio cuando el usuario solicita "Ver sitio web de escritorio"
(function() {
    // Verificar si el usuario quiere vista de escritorio (almacenado en localStorage)
    const desktopView = localStorage.getItem('desktopView') === 'true';
    
    // Detectar si es dispositivo móvil
    const userAgent = navigator.userAgent || navigator.vendor || window.opera;
    const isMobileDevice = /android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(userAgent.toLowerCase());
    
    // Detectar si el navegador está en modo "Request Desktop Site"
    // Cuando el usuario solicita vista de escritorio, el viewport width suele ser mayor
    const viewportWidth = window.innerWidth;
    const screenWidth = window.screen.width;
    
    // Si el viewport es ancho (>= 980px) en un dispositivo móvil, probablemente está en modo escritorio
    const isDesktopMode = isMobileDevice && viewportWidth >= 980;
    
    if (desktopView || isDesktopMode) {
        document.body.classList.add('desktop-view');
        // Forzar viewport de escritorio
        const viewport = document.querySelector('meta[name="viewport"]');
        if (viewport) {
            viewport.setAttribute('content', 'width=1200, initial-scale=1, maximum-scale=5, user-scalable=yes');
        }
        localStorage.setItem('desktopView', 'true');
    } else if (!isMobileDevice) {
        // Si no es dispositivo móvil, siempre usar vista de escritorio
        document.body.classList.add('desktop-view');
    }
})();

// Funcionalidad de toggle del sidebar
(function() {
    const sidebar = document.getElementById('sidebar');
    const sidebarToggleBtn = document.getElementById('sidebar-toggle-btn');
    const sidebarCloseBtn = document.getElementById('sidebar-close-btn');
    const menuToggleBtn = document.getElementById('menuToggleBtn');
    
    // Función para abrir/cerrar sidebar
    function toggleSidebar() {
        sidebar.classList.toggle('closed');
        // Guardar preferencia en localStorage
        localStorage.setItem('sidebarClosed', sidebar.classList.contains('closed'));
    }
    
    // Botón toggle (desktop)
    if (sidebarToggleBtn) {
        sidebarToggleBtn.addEventListener('click', toggleSidebar);
    }
    
    // Botón cerrar (dentro del sidebar)
    if (sidebarCloseBtn) {
        sidebarCloseBtn.addEventListener('click', toggleSidebar);
    }
    
    // Botón menú móvil
    if (menuToggleBtn) {
        menuToggleBtn.addEventListener('click', function() {
            sidebar.classList.toggle('open');
        });
    }
    
    // Restaurar preferencia del sidebar al cargar
    const sidebarClosed = localStorage.getItem('sidebarClosed') === 'true';
    if (sidebarClosed && window.innerWidth > 900) {
        sidebar.classList.add('closed');
    }
    
    // Mostrar/ocultar botón toggle según tamaño de pantalla
    function updateToggleButton() {
        if (window.innerWidth > 900) {
            if (sidebarToggleBtn) sidebarToggleBtn.style.display = 'block';
        } else {
            if (sidebarToggleBtn) sidebarToggleBtn.style.display = 'none';
        }
    }
    
    window.addEventListener('resize', updateToggleButton);
    updateToggleButton();
})();

// Detectar cambios en el tamaño de ventana
let resizeTimer;
window.addEventListener('resize', function() {
    clearTimeout(resizeTimer);
    resizeTimer = setTimeout(function() {
        const desktopView = localStorage.getItem('desktopView') === 'true';
        const isMobileDevice = /android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(navigator.userAgent.toLowerCase());
        
        if (desktopView && isMobileDevice && window.innerWidth >= 980) {
            document.body.classList.add('desktop-view');
            const viewport = document.querySelector('meta[name="viewport"]');
            if (viewport) {
                viewport.setAttribute('content', 'width=1200, initial-scale=1, maximum-scale=5, user-scalable=yes');
            }
        }
    }, 250);
});

// Botón Ir Arriba
(function() {
    const scrollToTopBtn = document.getElementById('scrollToTop');
    
    if (!scrollToTopBtn) return;
    
    // Mostrar/ocultar botón según scroll
    window.addEventListener('scroll', function() {
        if (window.pageYOffset > 300) {
            scrollToTopBtn.style.display = 'block';
        } else {
            scrollToTopBtn.style.display = 'none';
        }
    });
    
    // Funcionalidad del botón
    scrollToTopBtn.addEventListener('click', function() {
        window.scrollTo({
            top: 0,
            behavior: 'smooth'
        });
    });
})();
</script>

</body>
</html>
